<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
         提高你水平git命令 - 余瓞归的博客 
    </title>
    <meta name="description" content="ruby, rails, html, css, linux，javascript">
    <link href="atom.xml" rel="alternate" title="余瓞归的博客" type="application/atom+xml">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="asset/image/favicon.png">
    <link rel="stylesheet" href="asset/css/base.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-k2/8zcNbxVIh5mnQ52A0r3a6jAgMGxFJFE2707UxGCk= sha512-ZV9KawG2Legkwp3nAlxLIVFudTauWuBpC10uEafMHYL0Sarrz5A7G79kXh5+5+woxQ5HM559XX2UZjMJ36Wplg==" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css">
</head>
<body>
  <div class="container">
 <div class="eleven columns content">
	<p class="meta nav-header">
		<a href="./archives.html">文章分类</a>
		
			> <a class='category' href='other.html'>other</a>
		
	  <a href="./">
	    <i class="home fa fa-home"></i>
	  </a>
	</p>

	<h1 class="title">提高你水平git命令</h1>

	<div class="meta">
      <div class="date">
          发表于：<time datetime="2014/11/16">2014/11/16</time> 
      </div>
  </div>

	<div id="post">
	  <p>我们在使用Git常用的add, commit和merge等命令来处理我们日常的工作。本文介绍几个不常用，但是能给你带来极大的效率提高同时也能让你Git水平提高一个档次。</p>

<span id="more"></span><!-- more -->

<h3 id="toc_0">git blame [file_name]</h3>

<p>查看当前file_name文件中的每一行的修改记录。这个在我们想知道某一行是由谁最后一次修改时特别有用, 当你代码出了问题可以快速揪出那个坑人同伴。实用指数5星。</p>

<p>{% highlight ruby linenos %}</p>

<p>git blame Gemfile</p>

<p><sup>0a57942</sup> (rubyrock      2012-07-31 09:46:47 +0800  1) source &#39;<a href="http://ruby.taobao.org">http://ruby.taobao.org</a>&#39;<br/>
0f727cfd (ShiningRay    2014-05-16 14:59:10 +0800  2) source &#39;<a href="http://boohee:boohee0690@gems.boohee.cn">http://boohee:boohee0690@gems.boohee.cn</a>&#39;<br/>
<sup>0a57942</sup> (rubyrock      2012-07-31 09:46:47 +0800  3) <br/>
3556c391 (vincent       2013-10-16 19:13:20 +0800  4) gem &#39;rails&#39;, &#39;3.2.14&#39;<br/>
<sup>0a57942</sup> (rubyrock      2012-07-31 09:46:47 +0800  5) gem &#39;mysql2&#39;<br/>
ec26bb30 (zhouguangming 2013-01-04 17:23:54 +0800  6) gem &#39;sqlite3&#39;<br/>
<sup>0a57942</sup> (rubyrock      2012-07-31 09:46:47 +0800  7) <br/>
2421794e (vincent       2013-10-17 14:55:53 +0800  8) # Sunspot. Full-text search engine<br/>
<sup>0a57942</sup> (rubyrock      2012-07-31 09:46:47 +0800  9) gem &#39;sunspot_rails&#39;<br/>
d4327102 (zhouguangming 2012-07-31 08:43:59 +0800 10) gem &#39;sunspot_solr&#39;, &#39;1.3.2&#39;<br/>
45ec2a81 (vincent       2014-09-10 23:35:53 +0800 11) gem &#39;progress_bar&#39;, require: false</p>

<p>....</p>

<p>{% endhighlight %}</p>

<h3 id="toc_1">git log --oneline, --graph, --all</h3>

<p>我回顾历史时候常用git log。这个是按照提交顺序来排列显示你一些基本信息，你可以试试添加以下几个参数：</p>

<p>--oneline, 以极简的形式只显示commit的hash号和message<br/><br/>
--graph, 以图形树显示历史，SourceTree控们试着换换口味啦<br/><br/>
--all, 显示全部分支历史，不止当前分支哦   </p>

<p>最后，以上三个可以一起组合使用。</p>

<pre><code class="language-ruby">
* 64bb1b1 清理掉ifood星级计算和星级标签中对ifood_menu_materials和ifood_upload_menu_materials的关联
* bb9d626 去掉ifood model中ifood_menu_material, ifood_upload_menu_materials关联
* 8527d02 修改ifood_menu_material, ifood_upload_material
| * 2f4ba29 导入food_meal数据
| * 470322e Refactor: meal_time to meals_order, meal_kind to meals_kind.
| * 83afd02 增加 food_meal，用于存储食物的餐别meal_time和餐类 meal_kind.
| *   37a05a1 Merge branch &#39;master&#39; of git.boohee.cn:ruby/ifood
| |\  
| | | *   ba30fa8 WIP on hotfix/remove-duplicated-models: 26f481d Merge branch &#39;hotfix/remove-duplicated-models&#39; of git.
| | | |\  
| |_|/ /  
|/| | |   
| | | * 211cda6 index on hotfix/remove-duplicated-models: 26f481d Merge branch &#39;hotfix/remove-duplicated-models&#39; of git.
| |_|/  
|/| |   
* | |   26f481d Merge branch &#39;hotfix/remove-duplicated-models&#39; of git.boohee.cn:ruby/ifood into hotfix/remove-duplicated
|\ \ \  
| * | | 4798136 移除IfoodMenuMaterial关联
* | | | 567d5e8 移除IfoodMenuMaterial关联
|/ / /  
* | | b7ca53f remove binding.pry in qa
* | | a9bb314 Remove IFoodUnit
* | |   65a3fc5 Merge branch &#39;master&#39; of git.boohee.cn:ruby/ifood into hotfix/remove-duplicated-models
|\ \ \  
| | |/  
| |/|   
| * |   2d60cef Merge branch &#39;master&#39; of git.boohee.cn:ruby/ifood
| |\ \  
| * | | 7950470 Update new relic licence key
:

</code></pre>

<h3 id="toc_2">git reflog</h3>

<p>有时候我们迫不得已使用了git reset --hard，然后你马上意识到你丢失所有的提交。如果你还想在看看怎么办呢？那就使用git reflog吧。请记住Git是不会丢失任何一个commit信息的。</p>

<h3 id="toc_3">git add -p [file_name]</h3>

<p>设想一下，我们为一个文件写了好几个方法。但是有的还没有完全写好，我们只想提交已经写好的部分。怎么办？用git add -p filename, 可以互交是的提交一个文件的部分改动。</p>

<p>同时还有git add -i 也是互交试添加缓存，很好实用的。</p>

<h3 id="toc_4">git rebase -i HEAD~[number_of_commits]</h3>

<p>有没有想过一个功能可能存在多个提交，在最后上线前我们想这多个commit合并成一个。那就用rebase吧。</p>

<pre><code>git rebase -i HEAD~4
</code></pre>

<p>将从HEAD之前的4次提交合并成一个</p>

<h3 id="toc_5">git fsck --lost-found</h3>

<p>有些时候我们的commit可能没有任何的分支名或者tag指向它，到时我们查看历史记录是找不到塔，造成丢失commit的假象。我们可以用git fsck --lost-found快速找回。</p>

<pre><code>git fsck --lost-found
Checking object directories: 100% (256/256), done.
Checking objects: 100% (8924/8924), done.
dangling blob fc81f3f48b7d8298d9624c2f210a41d9eb8edaf8
dangling blob 6b5c1ba9a16089f04a71c4b691bc00a1c6f3310f
dangling commit 3ce4507cec2d6c0e83c263500759a55156d57876
</code></pre>

<h3 id="toc_6">git cherry-pick</h3>

<p>这个是我最喜欢的命令了，git cherry-pick [commit-hash], 可以将其他分支的单次commit合并到当前分支，而不是整个分支合并，也不会扰乱当前分支，酷毙了。</p>

	</div>

	<div id="post-pagination" class="pagination">
	  
	    <p class="previous">
	    	<a href="14913797809069.html" title="Previous Post: 为什么你的代码如此难以理解">上一页</a>
	    </p>
		
		
			<p class="next">
				<a href="14913797880850.html" title="Next Post: 字符编码">下一页</a>
			</p>
		
	</div>

	
</div>

         <div class="four columns sidebar">
            <nav>
                <a href="./">
                    <img src="asset/image/logo.png" id="logo" alt="Blog logo" width="80" />
                </a>
                <h2>
                    <a href="./living.html">生活</a> 
                    <a href="./technology.html">技术</a>
                </h2>
                
                <div id="bio">
                    <p style="text-align:center">欢迎访问我的个人博客.</p>
                    <p>
                        我是余瓞归，一个懒惰挑剔的Ruby程序员。现居上海浦东，在一家电子商务公司从事系统架构工作。
                    </p>
                </div>
                <div id="social">
                    Follow me:
                    <div id="stalker">
                        <a title="nateyu on Github" href="https://github.com/nateyu">
                            <i class="fa fa-github-square"></i>
                        </a>
                        <a title="Atom feed" id="atom" href="./atom.xml">
                            <i class="fa fa-rss-square"></i>
                        </a>
                        <a title="Email" id="email" href="mailto: yudiegui@gmail.com">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </nav>
        </div>       <div class="footer">
          <div class="disclaimer">
              <p>
                  本网站文章为个人所有，未经作者认许请勿转载
              </p>
              <p>
                  © 余瓞归, 2017 &mdash; built with <a href="http://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/swanson/lagom">Lagom theme</a>
              </p>
          </div>
      </div>
    </div>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
    <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript">
      var _hmt = _hmt || [];
      (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?01179477135d9e37e18df55d2011d072";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
      })();
    </script>
  </body>
</html>